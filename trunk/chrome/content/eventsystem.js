if (!htlivesight) var htlivesight = {};htlivesight.EventSystem = {		ev: {			GET_SERVER: 0,			LOGIN: 1,			LOGIN2: 2,			MY_TEAM: 3,			MY_TEAM2: 4,			MY_LEAGUE: 5,			MY_LEAGUE2: 6,			MY_LEAGUE_MATCHES: 7		},		Launch: function(f) {			setTimeout(function(){f;}, 10);		},		Declare: function(ev) {			switch (ev) {			case htlivesight.EventSystem.ev.GET_SERVER :				try{					htlivesight.EventSystem.Launch(htlivesight.Login());				}catch(e){alert("eventsystem"+e);}				break;			case htlivesight.EventSystem.ev.LOGIN :				htlivesight.EventSystem.Launch(htlivesight.GetMyData());				break;						case htlivesight.EventSystem.ev.LOGIN2 :				htlivesight.EventSystem.Launch(htlivesight.GetMyData2());				break;				case htlivesight.EventSystem.ev.MY_TEAM :				htlivesight.EventSystem.Launch(htlivesight.GetLeague());				break;							case htlivesight.EventSystem.ev.MY_TEAM2 :				htlivesight.EventSystem.Launch(htlivesight.GetLeague2());				break;				case htlivesight.EventSystem.ev.MY_LEAGUE :				htlivesight.EventSystem.Launch(htlivesight.GetLeagueMatches());				break;						case htlivesight.EventSystem.ev.MY_LEAGUE2 :				htlivesight.EventSystem.Launch(htlivesight.GetLeagueMatches2());				break;				case htlivesight.EventSystem.ev.MY_LEAGUE_MATCHES :				htlivesight.EventSystem.Launch(htlivesight.League.addLeagueMatches());				setTimeout(function(){htlivesight.EventSystem.Launch(htlivesight.League.addLeagueMatches2());}, 100);				setTimeout(function(){htlivesight.EventSystem.Launch(htlivesight.GetMyMatch());}, 200);				setTimeout(function(){htlivesight.EventSystem.Launch(htlivesight.Friends.addLive());}, 300);				setTimeout(function(){htlivesight.EventSystem.Launch(htlivesight.startView());}, 400);//				htlivesight.EventSystem.Launch(htlivesight.League.addLeagueMatches());//				htlivesight.EventSystem.Launch(htlivesight.League.addLeagueMatches2());//				htlivesight.EventSystem.Launch(htlivesight.GetMyMatch());//				htlivesight.EventSystem.Launch(htlivesight.Friends.addLive());//				htlivesight.EventSystem.Launch(htlivesight.startView());				break;			default: 				alert("htlivesight.EventSystem received an unknown event!");			break;			};		}};/** -------------------------------------------- * RequestManager * -------------------------------------------- */htlivesight.EventSystem.RequestManager =  {		open: true,		queue: new Array(),		RequestItem: function(r, d) {			this.func = r;			this.desc = d;		},		Add: function (request, description) {			reqItem = new htlivesight.EventSystem.RequestManager.RequestItem(request, description);			htlivesight.EventSystem.RequestManager.queue.push(reqItem);			htlivesight.EventSystem.Launch(htlivesight.EventSystem.RequestManager.Dispatch());		},		Dispatch: function () {			if (!htlivesight.EventSystem.RequestManager.open) return;			htlivesight.EventSystem.RequestManager.open=false;			try {				var request = htlivesight.EventSystem.RequestManager.queue.shift();				if (request) {					htlivesight.Log.Label(request.desc);					request.func.send(null);				} else {					htlivesight.EventSystem.RequestManager.open=true;				}			}catch(e){ alert("htlivesight.EventSystem.RequestManager.Dispatch(): " + e);}		},		toString: function () {			return ("[" + (htlivesight.EventSystem.RequestManager.open ? "open" : "close")+ "]" + this.queue);		}};/** -------------------------------------------- * XMLHTTPRequest * -------------------------------------------- */htlivesight.EventSystem.HTTPRequest = function(URL, responseParser, description) {	var request = new XMLHttpRequest();	request.open('GET', URL);	request.setRequestHeader("User-Agent", htlivesight.HTTP.userAgent);	request.overrideMimeType('text/xml');	request.onreadystatechange = function() {		htlivesight.EventSystem.HTTPRequestHandler(request, responseParser);	};	htlivesight.EventSystem.RequestManager.Add(request,htlivesight.Util.Parse(description,htlivesight.data[0]));};htlivesight.EventSystem.HTTPRequestHandler = function (request, responseParser) {	var state, status, responseText;	try {		state = request.readyState;		htlivesight.Log.Meter(state*100/5);		if (state==4) {			status = request.status;			if (status == 200) {				responseText = request.responseText; 				responseXML = request.responseXML;				responseText = htlivesight.HTTP.Sanitize(responseText);				responseParser(responseText, request);				htlivesight.Log.Meter(100);			} else {				alert(htlivesight.Util.Parse("MessageHattrickError",htlivesight.data[0]));				htlivesight.Log.Meter(100);				document.getElementById("button_login").disabled=false;			}			htlivesight.EventSystem.RequestManager.open=true;			htlivesight.EventSystem.Launch(htlivesight.EventSystem.RequestManager.Dispatch());		} else {		}  	} catch(e) {		if (state==4) {			htlivesight.Log.Meter(100);		};		htlivesight.EventSystem.RequestManager.open=true;		htlivesight.EventSystem.Launch(htlivesight.EventSystem.RequestManager.Dispatch());	}};